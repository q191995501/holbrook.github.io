<h1 id="量化交易平台要解决的问题"><a href="#量化交易平台要解决的问题" class="headerlink" title="量化交易平台要解决的问题"></a>量化交易平台要解决的问题</h1><p>量化交易最终要实现一个可以运行的策略。大体上可以研究阶段和运行阶段。</p>
<p>在研究阶段，需要</p>
<ol>
<li>研究</li>
<li>试运行</li>
<li>运行和监测</li>
</ol>
<p>研究平台</p>
<p>交易平台</p>
<h1 id="已有平台"><a href="#已有平台" class="headerlink" title="已有平台"></a>已有平台</h1><p>原创：<br><a href="https://www.quantopian.com/" target="_blank" rel="external">Quantopian</a></p>
<p><a href="http://www.zipline.io/index.html" target="_blank" rel="external">zipline</a><br>一个开源回测框架<br>配置一个在本地玩儿<br>还不怕策略被偷</p>
<p>国外：<br><a href="http://www.quantpedia.com/" target="_blank" rel="external">quantpedia</a> ?</p>
<ul>
<li><p><a href="https://uqer.io/home/" target="_blank" rel="external">优矿(Uqer)</a></p>
<p>背后是通联数据</p>
</li>
<li><p><a href="https://www.ricequant.com" target="_blank" rel="external">米筐(RiceQuant)</a></p>
</li>
<li><p><a href="https://www.joinquant.com/" target="_blank" rel="external">聚宽(JoinQuant)</a></p>
</li>
<li><p><a href="http://www.myquant.cn/" target="_blank" rel="external">掘金</a></p>
</li>
<li><p><a href="http://www.dajiangzhang.com/" target="_blank" rel="external">大奖章</a></p>
<p>背后是万德</p>
</li>
<li><p><a href="https://quant.jd.com/" target="_blank" rel="external">京东量化平台</a></p>
</li>
</ul>
<h1 id="主要内容"><a href="#主要内容" class="headerlink" title="主要内容"></a>主要内容</h1><h2 id="API语言支持"><a href="#API语言支持" class="headerlink" title="API语言支持"></a>API语言支持</h2><p>都支持 python<br>RiceQuant 还支持 Java<br>掘金还支持Java，Matlib, R, C/C++, C#<br>大奖章 ？</p>
<h2 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h2><p>前几天正好利用三家平台分析某些行业股票历史数据。发现如下：<br>1.优矿社区比较活跃，但保存到Data中的数据，一直在载入，就是看不到，无法下载。<br>2.米筐呢，保存的数据，刚开始还可以download，后来就无法下载了。<br>3.目前在用聚宽，但里面的股票财务数据，做的不如优矿和米筐详细。<br>建议可以参照某些财务类书籍，将指标分为运营性、盈利性、成长性、负债性等。</p>
<p>JoinQuant<br>        数据：免费提供A股行情、财务数据、指数数据、基金数据</p>
<p>时间周期：<br>tick, 分钟，日线</p>
<h2 id="开放性"><a href="#开放性" class="headerlink" title="开放性"></a>开放性</h2><p>RiceQuant 的回测框架开源，开放了RQuantAPI</p>
<h2 id="研究"><a href="#研究" class="headerlink" title="研究"></a>研究</h2><h2 id="回测"><a href="#回测" class="headerlink" title="回测"></a>回测</h2><p>JoinQuant<br>        支持日级、分钟级回测</p>
<h2 id="社区和帮助文档"><a href="#社区和帮助文档" class="headerlink" title="社区和帮助文档"></a>社区和帮助文档</h2><p>功能：</p>
<pre><code>模拟交易
    JoinQuant
    支持日级、分钟级、tick级模拟交易
实盘交易
    券商接口：
</code></pre><h2 id="活动"><a href="#活动" class="headerlink" title="活动"></a>活动</h2><h1 id="主要功能"><a href="#主要功能" class="headerlink" title="主要功能"></a>主要功能</h1><h1 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h1><p>分享一下在使用过程中的感受：</p>
<p>优矿：</p>
<ol>
<li>数据种类丰富，收费数据可以免费试用</li>
<li>有活跃的社区（日报我很喜欢哦，如果有动态大图就更破费了）</li>
<li>前几天推出的快速版和一个简化信号功能，体验了两天，回测速度非常快，爽。</li>
<li>@楼上匿名用户，我觉得自动补全很好用啊，文档都可以看到，使用DataAPI方便的不行。</li>
<li>优矿每月都有500万实盘大赛，听说赚了都归我。之前没参赛，打算用简化信号功能开发一个策略参赛玩玩</li>
<li>history拿历史数据的api太多了。界面体验上没另外两家好，熟悉平台时间也要长一些。</li>
</ol>
<p>米筐：</p>
<ol>
<li>米筐的founder们是一群具有交易系统气质的大牛，开发实力强劲。</li>
<li>平台同时支持python和java两种语言的回测。</li>
<li>米筐的视觉设计和文档做的非常棒，特别是回测结果页面，看着很舒服。</li>
<li>米筐举办的大赛，已经有两期了，奖品还可以，可惜也没拿到。</li>
<li>推出功能速度有些慢，后台稳定性有待加强（最近实时模拟交易也关闭了）。</li>
</ol>
<p>聚宽：</p>
<ol>
<li>开发速度很快，比如撤单，非复权成交等等功能，新功能上线很迅速；</li>
<li>社区也比较活跃，很多不错的ETF策略</li>
<li>聚宽没有举办大赛，而是推出了销售策略活动，打算提交一个试试。</li>
<li>微信推送调仓很好用，期待政府早日放开实盘限制</li>
<li>回测速度比上面两家慢，有时候会卡死。</li>
</ol>
<p>总结：<br>个人目前主要在优矿上玩。在ipython notebook进行完策略研究，直接编写策略，这种一体化的感觉很好，适合我们这种追求完美与极致体验的星座。也经常去聚宽社区，挖掘靠谱思路。米筐体验上很好，但是现在越用越少，希望他们能在功能上努力加油。</p>
<p>关于回测速度，本猿特意在三个平台分别运行了一个4年HS300按日调仓的日线双均线策略（颤抖吧，人类）回测时间如下：</p>
<p>UQER RQ JQ<br>hs300双均线 60s 264s 150s</p>
<p>距离上次写下这个答案也有4个多月了，几家平台都发生了一些变化，说一下新的体会。</p>
<p>我就列一下各平台4个月来的变化以及新体会吧。</p>
<ul>
<li>优矿<ul>
<li>分钟线回测快了不少，终于可以正常用了</li>
<li>加上了自动补全，然而连co_code这种都补出来了我会乱说？</li>
<li>其他变化不大。。</li>
<li>新体会：<ul>
<li>深入用过其它两家之后，才发现优矿的API好难用</li>
<li>history等重要函数存在很久bug的也没修</li>
<li>财务数据的API在分钟级回测里几乎不可能写对，而且提示信息好乱</li>
<li>现在已经几乎弃用优矿了，对他们很失望耶。。</li>
</ul>
</li>
</ul>
</li>
<li>Ricequant<ul>
<li>增加了很多数据，比如指数和分级基金等</li>
<li>现在回测也比较稳定了，感谢进度条。已经支持Python编写回测了</li>
<li>支持了分钟级的实盘仿真交易</li>
<li>参加了一次比赛，名落孙山。。。</li>
<li>新体会：<ul>
<li>回测速度更快了，应该不是错觉。。</li>
<li>刚发现财务数据文档好流弊</li>
<li>log和回测后的交易、仓位列表无法检索（似乎是部分渲染的结果），性能是好了，但是就不好用了</li>
<li>感人的全量日志随意拖动，不得不说调试起来效率高了很多</li>
</ul>
</li>
</ul>
</li>
<li>JoinQuant<ul>
<li>支持了分钟级数据的实盘仿真交易，不过数据是比实盘延迟了一分钟</li>
<li>实盘模拟中的微信通知功能简直搔到痒处</li>
<li>跟Riequant一样增加了很多数据</li>
<li>还有一些奇奇怪怪的小功能比如性能分析（反正我不会用。。）</li>
<li>新体会：<ul>
<li>API总体来说用起来和Quantopian类似，很容易上手</li>
<li>居然没有调仓神器order_target_percent？</li>
<li>API的命名比较随意，从API设计来看似乎并未经过深思熟虑,如:<ul>
<li>portfolio.unsell_positions[id]：英文语法上这是一个动宾结构，如果代表“无法卖出的仓位”，<br>应该用frozen_positions。对比Ricequant的类似功能是portfolio.position[id].sellable，直接获得可以卖出的仓位，平仓时更好用。</li>
<li>starting_cash和capital_used，两者都代表现金，但一个用了cash，一个用了capital，且顺序不一样。<br>后一个改成used_cash比较好。</li>
<li>order.add_time：这个又是一个语法上的动宾结构，不知所谓。<br>如果代表创建时间，应该用creation_time更好，相应后来会有modification_time, cancellation_time。<br>如果觉得太长，就用created_time, modified_time, canceled_time，add_time直译的确是“添加时间”，<br>然而这是中式英语。</li>
<li>run_weekly参数中的weekday：这个在英文代表的是星期的意思，如果是weekday，对应的是Monday, Tuesday这些，然而看API描述对应的是Quantopian的offset，不如直接用offset。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>对比</p>
<p>我觉得功能和体验上优矿已经落后了，企业版的我没用过<br>Ricequant的API比JoinQuant的好用，也更清爽，如果能加入微信提醒功能就好了。</p>
</li>
</ul>
<p>我两边都有用过，作为一个业余人士，不知道谁比较强，只说个人感受。</p>
<p>功能上的总结：</p>
<ul>
<li>优矿<ul>
<li>背靠通联引入了海量数据</li>
<li>IPython Notebook与回测引擎的整合可以做一些参数优化的东西，这点非常重要</li>
<li>支持分钟线回测及日数据仿真交易（每天两次收盘时触发一个事件）</li>
<li>CAL库支持了不少常用的不常用的金融算法</li>
<li>可自定义library，复用自己的模块</li>
</ul>
</li>
<li>Ricequant<ul>
<li>只有股票及ETF的交易数据和财务数据，不过一般也够用了</li>
<li>同时支持Java及Python的回测引擎</li>
<li>结果展示上丰富一些</li>
<li>速度超快，可能是因为是Java的关系（Python也很快，据说只是在Java上包了个壳）</li>
<li>长得好<br>各自的缺点：</li>
</ul>
</li>
<li>优矿<ul>
<li>回测速度较慢。分钟线回测的速度基本上不能忍，我一次都没有成功过（可能是因为太慢导致session判断超时？）</li>
<li>数据来源及如何洗刷上没有解释，我用的时候只能相信或者不信</li>
<li>回测的api有点绕</li>
</ul>
</li>
<li>Ricequant<ul>
<li>网速差的时候经常回测结果跑不出来</li>
<li>好像其他没什么了。。就是功能少了点</li>
</ul>
</li>
</ul>
<p>个人认为优矿的运营很接地气，但是产品细节并不亲民（功能是多了，但是比如分钟线回测真的是然并卵啊，日数据仿真有意义吗）；<br>而Ricequant正好相反，感觉是一群比较踏实的人吧。</p>
<p>至于JoinQuant，我近期才注册，随便玩了一下。然而必须吐个槽。。</p>
<p>数月前第一次看到Ricequant时我第一反应就是，我去，抄得真像。然后看到了joinquant。<br>发现Ricequant的界面真是诚意之作——抄的是交互设计，视觉设计完全不一样；后来看到了论坛的改版，简直惊艳。</p>
<p>另外JoinQuant连API设计都是像素级拷贝（除了去掉了initialize）。<br>是为了直接复制黏贴即可使用Quantopian的策略？</p>
<p>当然，JoinQuant现在支持分钟线及每日数据回测，而且速度很快（目测甚至快过Quantopian）。<br>同样是Python的平台（不知道后台是不是也用了Python写），性能也是有本质差距的。</p>
<p>我没有深入JoinQuant，不过看文档他们似乎只有基本的交易行情数据，跟前面两家平台还是有一定差距。<br>但是就他们的技术能力来说，我认为还是很有潜力的。等哪天追上了再关注一下。</p>
<hr>
<p>题主说的这三家我都用过，但是个人感觉最强的应该是掘金！</p>
<p>首先说聚宽，那是我最先用的量化平台，也是目前的主力平台，优点是支持微信提醒，这点非常重要！可以自己设置股价是否复权（貌似三家里就他家暂时可以？）对于一些时间段较长的回测还是不错的。缺点是回测速度只有一般，时快时慢，不过好在大部分时间能用，api 相对较少，数据的话也不是很全，比如目前的基本面数据就找不到关于企业分红的信息。</p>
<p>然后是米框，这个平台本来打算做备胎的，不过网站用起来太别扭，所以被踢掉了。<br>优点是 数据很全，公司的基本面信息齐全，你想到的没想到的他都提供给你了，网站本身提供的 api 也相当丰富，尤其是那几个 order_xxx 的函数，非常实用，相当赞！ 支持 java 编写策略应该也算一大优点吧？<br>缺点暂时不明，因为网站用起来别扭，所以我用的不多。</p>
<p>接着是优矿，通联数据开的，优点很明显，数据齐全，毕竟通联数据就是干这个的。<br>缺点嘛，api 设置的太渣了，估计是经手的人太多，乱七八糟的驼峰，有些全称，有些简写，尼玛关键是数量多，看的头大，用起来也麻烦，我反正是被那一堆 api 吓跑的。</p>
<p>最后我要说掘金，为什么我认为目前他是最强的？因为以上三个都是在线平台，你所有的策略都要放在他们平台，安全性什么的就看平台道德了。</p>
<p>而掘金的策略都存放在本地！存放在本地！存放在本地！至少策略安全性上比上面三个高一大截！而且由于是运行在本地环境，可定制性是上面几个平台无法比拟的，比如我用 python 编写策略，上面三个平台都不允许策略访问网络，掘金完全没这个问题，要用什么库自己加！</p>
<p>不过缺点也很明显，策略编写复杂，比上面三个要复杂不少，而且文档写的也不够浅显易懂，不是有经验的码农基本用不了。而且社区是上面三个平台里最不活跃的，要不是他们经常更新 SDK 我一度以为他们已经不干了（大概主要精力放在企业版上了-v-）</p>
<p>而且只支持 window 跟 linux 平台，osx 用户就只能玩蛋去了（已经向他们反馈多次，始终没有回应）-，-</p>
<p>不过由于本地运行的优点，我还是最关注他们。。。</p>
<p>单纯以现阶段的研究工具来说感觉：<br>优矿：数据充分。但是用起来总是感觉比较慢（？），Notebook与策略回测整合的很好。AI部分似乎没有深度计算部分（聚宽和米框都有），可以加上。社区活跃度较高。<br>聚宽：熟了之后很爽，数据够用，非常灵活。<br>米框：研究的时候用起来比聚宽还爽，社区也不错。</p>
<p>这三个都是很好的研究工具，优矿适合入门，聚宽米框适合有点经验的研究者。这种开放平台，后续的发展，个人感觉在社区活跃度、开放度、生态系统构建上。</p>
<p>个人用过joinquant和ricequant，只说这两个到比较。<br>joinquant：开发速度特别快，对于社区和群里面反映的问题响应非常迅速，开发实力强劲。回测速度比ricequant快太多，数据处理的较好，文档详尽。不过不支持java，网站看起来比较高冷，有一些小bug。<br>ricequant：刚开始用的原因是支持java，页面制作的比较有意思，看起来有亲和力，回测过程中能够一直看到风险数据的变化。不过回测速度比较慢，同时回测的策略太少，数据有小问题（有个策略跑到一半出错了，多次尝试都这样）。整体框架设计没有joinquant好用，文档没有joinquant好用。</p>
<p>作为初学者，感觉米框很不错 确实没人 但是整个平台数据什么都是免费 教学贴也越来越丰富 可能以后进阶了会看看其他平台但是现阶段还是顶米框 希望能越做越好</p>
<p>我用同样的期货策略在米筐和优矿上跑了一下发现结果差距好大，然后在vnpy上跑了一下发现差距更大了。然后就被水淹没不知所措了…</p>
<p>对于小白来说可能米矿更好一点吧 感觉他上面的教学比优矿做的好</p>
<p>我觉的ricequant上面有python和java两种方式写策略，很不错，反正就是学习玩玩（相信online的模式以后肯定是趋势），日常数据还是来自wind，分析用matlab，策略用python</p>
<p>不得不吐槽下ricequant, 类似某米牌手机，扩张快，数据质量小问题很多。</p>
<p>因为uqer没有2010之前的分钟数据，转到ricquant.<br>但是屡屡踩雷啊：分钟数据和日线数据不在一个频道，停牌时分钟有时填充有时不填充，有的分钟数据是前一天的。。。<br>为了这个，真是额外多花了一倍的调试时间；还不知道埋了多少雷。</p>
<p>rq起步晚，工作人员比uq少，服务态度也就跟不上。</p>
<p>客观的看论坛活跃用户，rq不及uq十分之一，慎入！！！</p>
<h1 id="量化平台的发展"><a href="#量化平台的发展" class="headerlink" title="量化平台的发展"></a>量化平台的发展</h1><p>目前高票匿名用户完全搞错了这两个平台的用途。</p>
<p>首先本身量化交易由于交易市场的特殊性，不存在和其他行业一样竞争越激烈越有可能使整个社会全面进步，<br>而是一个人只要有能盈利的策略就可以稳割韭菜。</p>
<p>所以这种平台是为了干什么呢？肯定是为了吸引用户啊……吸引用户是干什么呢？<br>肯定不是为了找最优策略吧……大家都是小怪，碰撞不出什么高端策略……</p>
<p>说白了以后肯定要利用媒体等商业模式变现啊，所以这两个都是社交平台呀。</p>
<p>量化是投资的未来，数据是量化的基础，即使暂时低潮，<br>基于大数据和AI的量化投资也终将成为市场主导的力量。</p>
<p>商业模式：</p>
<p>先从工具下手，到社区到众筹策略hedge fund</p>
<p>先抛观点：一直不看好所谓的量化平台，原因是这并不是一个好的商业模式</p>
<p>首先，用户定位问题<br>现在的量化平台主要定位于中低端客户，比如各类学生。那么从客户定位来说就处于一个很尴尬的地位，因为你是不能随着客户成长而成长的。因为如果客户足够专业，那么他一定会自己搞系统，并不会使用你的量化平台，而且从专业能力上他们自己的能力也强于你们这些做量化平台的，所以他们的选择一定是自建。因此，你的客户群体永远只能定位于中低端用户。那么问题来了，金融行业是一个赢者通吃，贫富差距特别明显的行业。中低端用户本来就没有钱，收入少，你就很难再从他们身上赚钱，而当他们开始挣钱了，又会慢慢脱离你的平台，你也挣不到他们的钱，所以为什么我说这并不是一个好的商业模式。</p>
<p>其次，安全性的问题<br>其实很多回答已经涉及到这方面了，量化投资和主动投资不同。你的脑子是黑箱，但是你的代码不是，所以量化的人特别注意安全性的问题。不管你平台再怎么解释，可是事实不是你有没有，是你的用户相信你有没有。我举一个例子来说明这个问题，有一个业内大佬刚出来做私募的时候，我问他对通联的看法，他的原话是通联和我很熟，他们邀请我过去提供给我做私募需要的一切，包括办公场地，拎包入住，但是我哪里敢。当时他正好在公司最困难的时期，现在已经成为了国内一线的量化对冲基金，当时那么困难的情况下不会，现在恐怕更不会了。他当时的表态也说明了很多人的看法，不管我怎么困难，安全性是我受要考虑的问题，而量化平台并不能给我这个信心。对于做量化的人来说需要很多it支持，我可以用阿里云的主机或者用github把所有的代码放在上面，因为我觉得你们就是做这个服务的，不会针对我。但是我不敢把自己的核心东西交给你们这些量化平台，正是因为你们懂这些，何况你们下面还有自己的投资公司（比如通联下面的桐昇通惠），这个必须有利益冲突，我怎么知道你会怎么处理，就算说的再好听我也不敢冒这个险，何况在国内的商业环境下。</p>
<p>那么是不是量化平台不能做了呢？非也，我觉得在两块还是可以有所做和有所需求的<br>第一块是数据接口<br>我不需要提供什么在线编程，大家最需要的必需品是数据，我有很好的数据接口可以让我用方便的模式调取各种数据就ok了。并且数据这块也是最有粘性的东西，如果你再有一些特别的数据就更好了，这个就是BATJ的优势了。当然这个数据接口核心在于两点：1.接口方式足够方便，不要我调一堆数据要写一长段代码，并且速度够快。2.数据组织内容足够清晰准确。虽然看上去就两句话，但是能做好太难了，比如拿最标准的行情数据来看，也没有一个能做好的。数据这个活需要很深的积累沉淀，并不是现在互联网商业模式下大家追求的东西，所以。。。</p>
<p>第二块是交易接口<br>通用的方便的交易接口，CTP方面已经作出了很好的表率。<br>交易接口其实很简单，挂单、撤单、查询核心做好三个功能就ok了，<br>不过由于政策的原因，这块可能有一定的困难。</p>
<p>为什么说这两块东西？很简单，首先是必需品，数据和交易都是永远绕不开的，<br>这个是做量化的基础工作，所以你能帮助大家在这块减少时间就是一个有用的东西。<br>其次是安全性，知道我提取了哪些数据和下单情况并不能有效破解我的策略，反正现在数据供应商和经纪公司也是知道这个的。</p>
<p>另外回测系统可以做，但是不是这种写代码回测，也不是这种日线级别的回测。<br>是要做一个类似模拟交易所一样扔挂单撤单的tick级的回测系统，<br>可惜这个太难有能力做这个的人肯定自己做对冲基金不会拿出来做成一个商业化的平台，看不上这些小钱。</p>
<p>最后大家在搞什么在线编程平台、社交之类的东西。<br>我的看法就是要么你脑子不清楚不知道用户要什么，要么就是挂羊头卖狗肉，<br>真正想做的东西并不是量化平台，赚钱的点当然也就不是提供一个量化平台那么简单的事情了。</p>
<h1 id="用户的想法"><a href="#用户的想法" class="headerlink" title="用户的想法"></a>用户的想法</h1><p>我们是做这个行业的，公司里一般要求策略不可以拿到云端去跑，保密性不高，<br>但偶尔有时间去看看大家都有啥有意思的想法，就目前观察结果来看，以科普和灌水居多，<br>很多帖子以普及量化知识为主，有价值的策略并不多。<br>真实的量化交易以清洗数据、梳理数据为主，<br>写代码做回测在实际工作中占比不大，贡献估计在20～30%左右，<br>而另一方面我们平时写的代码复杂度远超过几根均线或者简单排序，<br>有些时候Function需要自己定义，还需要很多自定义的过程，<br>然而这些并不是最烦的，最烦的是需要分析原数据、检查缺失值和异常值，<br>做大量的描述性统计分析，之后需要对数据结果进行反复的交叉对比和检查，<br>以防出现未来函数或者数据错误，这类问题有时候是代码的问题，有时候是数据本身的问题，<br>在云端跑最大的问题就是数据的质量无法确保。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1>