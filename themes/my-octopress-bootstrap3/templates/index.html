{% extends "base.html" %}
{% block content %}

<div class="span9">
{% if articles %}
{% for article in (articles_page.object_list if articles_page else articles) %}

  <article class="well">
    <header class="page-header">
      <h2 class="entry-title"><a href="{{ article.url }}">{{ article.title }}</a></h1>
      <p class="meta">
        <time datetime="{{ article.locale_date.format("%Y-%m-%d") }}" pubdate data-updated="true">
          {{ article.locale_date.format("%Y-%m-%d") }}
        </time>

        {% if article.category %}
        in <a href="{{ SITEURL }}/{{ article.category.url }}">{{ article.category}}</a>
        {% endif %}

        {% if article.tags|count > 0 %} Tags:
        {% for tag in article.tags %}
        <a href="{{ SITEURL }}/{{ tag.url }}">{{ tag }}</a>,
        {% endfor %}
        {% endif %}
      </p>
    </header>

    <div class="entry-content"><p class="indent">
      {{ article.content if FOUNDATION_FRONT_PAGE_FULL_ARTICLES else article.summary }}
    </p></div>
  </article>

{% endfor %}
{%endif%}

{# deal with pagination #}
{% if articles_page and articles_paginator.num_pages > 1 %}

  <div class="row">
    <div class="small-12 columns text-center">
      <div class="pagination-centered">
        <ul class="pagination">
        {% if articles_page.has_previous() %}
          {% set num = articles_page.previous_page_number() %}
          <li class="arrow"><a href="{{ SITEURL }}/{{ page_name }}{{ num if num > 1 else '' }}.html">&larr; Previous</a></li>
        {% else %}
          <li class="arrow unavailable"><a href="#">&larr; Previous</a></li>
        {% endif %}
        {% for num in range( 1, 1 + articles_paginator.num_pages ) %}
          <li class="{{ 'current' if num == articles_page.number else '' }}"><a href="{{ SITEURL }}/{{ page_name }}{{ num if num > 1 else '' }}.html">{{ num }}</a></li>
        {% endfor %}
        {% if articles_page.has_next() %}
          <li class="arrow"><a href="{{ SITEURL }}/{{ page_name }}{{ articles_page.next_page_number() }}.html">Next &rarr;</a></li>
        {% else %}
          <li class="arrow unavailable"><a href="#">&rarr; Next</a></li>
        {% endif %}
        </ul>
      </div>
    </div>
  </div>
{% endif %}

</div>

<aside class="sidebar-nav span3">
  <section class="well">
    <ul id="profile" class="nav nav-list">
      <li class="nav-header">Tags</li>
      {% for year, date_year in dates|groupby( 'date.year' )|sort(reverse=True) %}
      {% for month, articles in date_year|groupby( 'date.month' )|sort(reverse=True) %}
      <li><a href="/{{ year }}/{{ articles[0].date.strftime('%m') }}/">{{ articles[0].date.strftime('%Y-%m') }}  ({{ articles|count }})</a></li>
      {% endfor %}
      {% endfor %}
    </ul>
  </section>

  <section class="well">
    <ul id="profile" class="nav nav-list">
      <li class="nav-header">Monthly Archives</li>
      {% for tag in tag_cloud %}
      <li><a href="/tag/{{ tag.0.slug|lower|replace(' ', '-') }}.html" class="tag-{{ tag.1 }}">{{ tag.0 }}</a></li>
      {% endfor %}
    </ul>
  </section>

    <section class="well">
    <div class="profilepic align-center">
        <img src="/images/common/me.jpeg" alt="cxh.me" width="160px" class="img-rounded"/>
    </div>
    <hr/>

    <ul id="about_me" class="nav nav-list">
        <li class="nav-header">About Me</li>
        <li class="sindent">//TODO:</li>
    </ul>
</section>

<section class="well">
    <ul id="profile" class="nav nav-list">
        <li class="nav-header">Profile</li>
        <li><a href="https://github.com/holbrook/">GitHub</a></li>
    </ul>
</section>

<section class="well">
    <ul id="profile" class="nav nav-list">
        <li class="nav-header">Links</li>
        {% for name, link in SOCIAL|sort %}
        <li><a href="{{ link }}">{{ name }}</a></li>
        {% endfor %}
    </ul>
</section>
</aside>

{% endblock %}
